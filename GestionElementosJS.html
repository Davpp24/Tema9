<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="GestionElementosJS.css">
    <title>Formulario de Elementos</title>
</head>

<body>
    <h1>Formulario</h1>
    <p>Selecciona un color: <input type="color" id="colorPicker"></p>
    <button onclick="cambiarColorFondo()">Cambiar color de fondo</button>
    <button onclick="agregarElemento()">Añadir más elementos</button>
    <button onclick="resetearElementos()">Resetear elementos</button>
    <h2>Elementos</h2>
    <div id="elementos">
        <div id="elemento">
            <img src="caballo.jpg" alt="Caballo"><br>
            <button onclick="cambiarElemento(this)">Cambiar</button>
            <button onclick="borrarElemento(this)">Borrar</button>
        </div>
    </div>

    <script>
        function cambiarColorFondo() {
            let color = document.getElementById("colorPicker").value;

            const imagenes = document.querySelectorAll('img');

            imagenes.forEach(element => {
                element.style.backgroundColor = color;
            });
        }

        function agregarElemento() {
            const div = document.querySelector('#elementos');

            const elemento = document.createElement('div');

            elemento.id = 'elemento';

            const imagen = document.createElement('img');

            const imagenesAleatorias = ["caballo.jpg", "caballo2.jpg", "caballo3.jpg", "caballo4.jpg"];
            const indiceAleatorio = Math.floor(Math.random() * imagenesAleatorias.length);
            imagen.src = imagenesAleatorias[indiceAleatorio];
            imagen.alt = 'Caballo';

            const botonCambiar = document.createElement('button');
            botonCambiar.onclick = function () {
                cambiarElemento(this);
            };
            botonCambiar.textContent = 'Cambiar';

            const botonEliminar = document.createElement('button');
            botonEliminar.onclick = function () {
                borrarElemento(this);
            };
            botonEliminar.textContent = 'Borrar';

            const br = document.createElement('br');

            elemento.appendChild(imagen);
            elemento.appendChild(br);
            elemento.appendChild(botonCambiar);
            elemento.appendChild(botonEliminar);

            div.appendChild(elemento);
        }

        function cambiarElemento(elemento) {
            const img = elemento.closest("#elemento").querySelector("img");
            
            // Lista de imágenes disponibles
            const imagenesAleatorias = ["caballo.jpg", "caballo2.jpg", "caballo3.jpg", "caballo4.jpg"];
            
            // Generamos un índice aleatorio
            const indiceAleatorio = Math.floor(Math.random() * imagenesAleatorias.length);
            
            // Cambiar la imagen a una aleatoria de la lista
            img.src = imagenesAleatorias[indiceAleatorio];
        }

        function borrarElemento(elemento) {
            elemento.parentNode.remove();
        }

        function resetearElementos() {
            const contenedor = document.getElementById('elementos');
            contenedor.innerHTML = `
                <div id="elemento">
                    <img src="caballo.jpg" alt="Caballo"><br>
                    <button onclick="cambiarElemento(this)">Cambiar</button>
                    <button onclick="borrarElemento(this)">Borrar</button>
                </div>
            `;
        }
    </script>
</body>

</html>